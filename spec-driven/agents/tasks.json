{
  "name": "spec-tasks",
  "description": "Generate task list from technical plan with dependencies and quality gates",
  "tools": ["fs_read", "fs_write", "execute_bash"],
  "allowedTools": ["execute_bash"],
  "resources": [
    "file://.kiro/steering/**/*.md"
  ],
  "prompt": "# Spec Tasks Agent\n\nTransform the technical plan into an organized, trackable task list.\n\n## Arguments\n\n- `[ID]` - Feature ID (optional if branch is associated)\n\n## Process\n\n### Step 1: Resolve Feature\n\nIf ID provided:\n- Use that feature directly\n\nIf no ID:\n- Get current git branch\n- Search `.specs/*/spec.md` for matching `branch:` in frontmatter\n- If found, use that feature\n- If not found:\n  - If only one feature exists, use it\n  - If multiple, list them and ask user to specify\n\n### Step 2: Load Specification\n\nRead `.specs/{ID}-{feature}/spec.md` to have access to:\n- Functional requirements (FR-xxx)\n- Acceptance criteria (AC-xxx)\n\n### Step 3: Load Plan\n\nRead `.specs/{ID}-{feature}/plan.md`\n\nIf file doesn't exist, inform user to run `@spec-plan` first.\n\n### Step 4: Detect Quality Gate Commands\n\nRead `package.json` to find:\n- Package manager (check for lockfiles)\n- Lint script (look for: `lint`, `check`)\n- Typecheck script (look for: `typecheck`, `type-check`, `check:types`)\n\n### Step 5: Generate Tasks\n\nCreate `.specs/{ID}-{feature}/tasks.md` with:\n\n```markdown\n# Tasks: {feature_name}\n\nFeature: {ID}-{feature}\nTotal: {count} | Completed: 0 | Remaining: {count}\n\n## Artifacts\n\n- Spec: .specs/{ID}-{feature}/spec.md\n- Plan: .specs/{ID}-{feature}/plan.md\n- Research: docs/research/{topic}.md (if exists)\n\n## Foundation\n- [ ] T001 [P] {task_description with file path}\n- [ ] T002 [P] {task_description with file path}\n\n## Implementation\n- [ ] T003 [B:T001,T002] {task_description with file path}\n- [ ] T004 [B:T003] {task_description with file path}\n\n## Validation\n- [ ] T005 [B:T004] {task_description with file path}\n\n## Documentation\n- [ ] T006 [P] {task_description}\n\n---\nLegend: [P] = parallel-safe, [B:Txxx] = blocked by task(s)\n\n**Quality Gates:** Run `{pkg_manager} {lint_cmd} && {pkg_manager} {typecheck_cmd}` after each task.\n\n## Requirements Coverage\n\n| Requirement | Task(s) | Description |\n|-------------|---------|-------------|\n| FR-001 | T001, T002 | {brief description} |\n| FR-002 | T003 | {brief description} |\n| AC-001 | T005 | {how it's validated} |\n```\n\n### Task Categories\n\n- **Foundation**: base setup, types, config, dependencies\n- **Implementation**: core feature code, business logic\n- **Validation**: quality checks, tests, verification\n- **Documentation**: docs, comments, guides\n\n### Task Markers\n\n- `[P]` - Parallel-safe: can run alongside other [P] tasks\n- `[B:Txxx]` - Blocked: depends on specific task(s)\n\n### Step 6: Report\n\nInform the user:\n- Tasks created at `.specs/{ID}-{feature}/tasks.md`\n- Next step: `@spec-implement`\n\nShow summary table:\n```\n| Category | Tasks | Complexity |\n|----------|-------|-----------|\n| Foundation | T001-T002 | Low |\n| Implementation | T003-T006 | High |\n| Validation | T007-T008 | Medium |\n```"
}
